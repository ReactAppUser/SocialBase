(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){"use strict";a.d(t,"c",function(){return s}),a.d(t,"b",function(){return o}),a.d(t,"a",function(){return l});var n=a(75);const r=n.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"d6460e26-f830-4b67-87f8-9b2af9da1172"}}),s={getUsers:(e=1,t=10)=>r.get("users?page=".concat(e,"&count=").concat(t)).then(e=>e.data),follow:e=>r.post("follow/".concat(e)),unfollow:e=>r.delete("follow/".concat(e)),getProfile:e=>(console.warn("Obsolete methode. Please use profileAPI object"),o.getProfile(e))},o={getProfile:e=>r.get("profile/"+e),getStatus:e=>r.get("profile/status/"+e),updateStatus:e=>r.put("profile/status",{status:e})},l={me:()=>r.get("auth/me"),login:(e,t,a=!1)=>r.post("auth/login",{email:e,password:t,rememberMe:a}),logout:()=>r.delete("auth/login")}},123:function(e,t,a){e.exports={userPhoto:"users_userPhoto__3o9vZ"}},124:function(e,t,a){e.exports=a.p+"static/media/smile.dc4c0ee1.jpg"},125:function(e,t,a){e.exports=a.p+"static/media/loading.3b7c3741.gif"},126:function(e,t,a){e.exports=a.p+"static/media/Caution.e30aee97.png"},128:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(0),r=a.n(n),s=a(11),o=a(282);let l=e=>({isAuth:e.auth.isAuth});const c=e=>{return Object(s.b)(l)(class extends r.a.Component{render(){return this.props.isAuth?r.a.createElement(e,this.props):r.a.createElement(o.a,{to:"/login"})}})}},15:function(e,t,a){e.exports={nav:"Navbar_nav__2y3IN",item:"Navbar_item__SOMQ0",activeLink:"Navbar_activeLink__1zTL3"}},154:function(e,t,a){e.exports=a(281)},237:function(e,t,a){},238:function(e,t,a){},27:function(e,t,a){"use strict";a.d(t,"b",function(){return u}),a.d(t,"a",function(){return m}),a.d(t,"c",function(){return p});var n=a(28),r=a(0),s=a.n(r),o=a(76),l=a(45),c=a.n(l);const i=({input:e,meta:{touched:t,error:a},children:n})=>{const r=t&&a;return s.a.createElement("div",{className:c.a.formControl+" "+(r?c.a.error:"")},s.a.createElement("div",null,n),r&&s.a.createElement("span",null,"Shit, this is ErRoR: ",a," ;) "))},u=e=>{const t=e.input,a=(e.child,e.meta,Object(n.a)(e,["input","child","meta"]));return s.a.createElement(i,e,s.a.createElement("textarea",Object.assign({},t,a)))},m=e=>{const t=e.input,a=(e.child,e.meta,Object(n.a)(e,["input","child","meta"]));return s.a.createElement(i,e," ",s.a.createElement("input",Object.assign({},t,a)))},p=(e,t,a,n,r={},l="")=>s.a.createElement("div",null,s.a.createElement(o.a,Object.assign({placeholder:e,name:t,validate:a,component:n},r)),"  ",l)},281:function(e,t,a){"use strict";a.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var n=a(6),r=a(81),s=a(90);let o={};var l=(e=o,t)=>e,c=a(7),i=a.n(c),u=a(14),m=a(8),p=a(10);const d=(e,t,a,n)=>e.map(e=>e[a]===t?Object(m.a)({},e,{},n):e);let g={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[],fake:10};const f=e=>({type:"FOLLOW",userId:e}),E=e=>({type:"UNFOLLOW",userId:e}),h=e=>({type:"SET_CURRENT_PAGE",currentPage:e}),b=e=>({type:"TOGGLE_IS_FETCHIN",isFetching:e}),w=(e,t)=>({type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}),v=function(){var e=Object(u.a)(i.a.mark(function e(t,a,n,r){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(w(!0,a)),e.next=3,n(a);case 3:0===e.sent.data.resultCode&&t(r(a)),t(w(!1,a));case 6:case"end":return e.stop()}},e)}));return function(t,a,n,r){return e.apply(this,arguments)}}();var S=(e=g,t)=>{switch(t.type){case"FOLLOW":return Object(m.a)({},e,{users:d(e.users,t.userId,"id",{followed:!0})});case"UNFOLLOW":return Object(m.a)({},e,{users:d(e.users,t.userId,"id",{followed:!1})});case"SET_USERS":return Object(m.a)({},e,{users:t.users});case"SET_CURRENT_PAGE":return Object(m.a)({},e,{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(m.a)({},e,{totalUsersCount:t.count});case"TOGGLE_IS_FETCHIN":return Object(m.a)({},e,{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(m.a)({},e,{followingInProgress:t.isFetching?[...e.followingInProgress,t.userId]:e.followingInProgress.filter(e=>e!=t.userId)});default:return e}},O=a(30);let _={userId:null,email:null,login:null,isAuth:!1};const P=(e,t,a,n)=>({type:"network/auth/SET_USER_DATA",payload:{userId:e,email:t,login:a,isAuth:n}}),C=()=>(function(){var e=Object(u.a)(i.a.mark(function e(t){var a,n,r,s,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.me();case 2:0===(a=e.sent).data.resultCode&&(n=a.data.data,r=n.id,s=n.login,o=n.email,t(P(r,o,s,!0)));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}})();var j=(e=_,t)=>{switch(t.type){case"network/auth/SET_USER_DATA":return Object(m.a)({},e,{},t.payload);default:return e}},y=a(117),N=a(116);let I={initialized:!1};var T=(e=I,t)=>{switch(t.type){case"INITIALIZED_SUCCESS":return Object(m.a)({},e,{initialized:!0});default:return e}};let k=Object(n.c)({profilePage:r.b,dialogsPage:s.a,sidebar:l,usersPage:S,auth:j,form:N.a,app:T});const x=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||n.d,U=Object(n.e)(k,x(Object(n.a)(y.a)));window.__store__=U;var L=U,A=a(0),R=a.n(A),F=a(120),z=a.n(F),G=(a(237),a(238),a(15)),M=a.n(G),D=a(285);var B=()=>R.a.createElement("nav",{className:M.a.nav},R.a.createElement("div",{className:M.a.item},R.a.createElement(D.a,{to:"/profile",activeClassName:M.a.activeLink},"Profile")),R.a.createElement("div",{className:"".concat(M.a.item," ").concat(M.a.active)},R.a.createElement(D.a,{to:"/dialogs",activeClassName:M.a.activeLink},"Messages")),R.a.createElement("div",{className:"".concat(M.a.item," ").concat(M.a.active)},R.a.createElement(D.a,{to:"/users",activeClassName:M.a.activeLink},"Users")),R.a.createElement("div",{className:M.a.item},R.a.createElement("a",null,"News")),R.a.createElement("div",{className:M.a.item},R.a.createElement("a",null,"Music")),R.a.createElement("div",{className:M.a.item},R.a.createElement("a",null,"Settings"))),H=a(121),W=a(286),J=a(284),X=a(11),Y=a(122);const Z=Object(Y.a)(e=>e.usersPage.users,e=>e.filter(e=>!0)),q=e=>e.usersPage.pageSize,K=e=>e.usersPage.totalUsersCount,Q=e=>e.usersPage.currentPage,V=e=>e.usersPage.isFetching,$=e=>e.usersPage.followingInProgress;var ee=a(28),te=a(115),ae=a(58),ne=a.n(ae);a(243);var re=({totalUsersCount:e,pageSize:t,currentPage:a,onPageChanged:n,portionSize:r=10})=>{let s=Math.ceil(e/t),o=[];for(let g=1;g<=s;g++)o.push(g);let l=Math.ceil(s/r),c=Object(A.useState)(1),i=Object(te.a)(c,2),u=i[0],m=i[1],p=(u-1)*r+1,d=u*r;return R.a.createElement("div",{className:ne.a.paginator},u>1&&R.a.createElement("button",{onClick:()=>{m(u-1)}},"PREV"),o.filter(e=>e>=p&&e<=d).map(e=>R.a.createElement("span",{className:ne.a.pageNumber,key:e,onClick:t=>{n(e)}},e)),l>u&&R.a.createElement("button",{onClick:()=>{m(u+1)}},"NEXT"))},se=a(123),oe=a.n(se),le=a(124),ce=a.n(le);a(75);var ie=e=>{let t=e.user,a=e.followingInProgress,n=e.unfollow,r=e.follow;Object(ee.a)(e,["user","followingInProgress","unfollow","follow"]);return R.a.createElement("div",null,R.a.createElement("span",null,R.a.createElement("div",null,R.a.createElement(D.a,{to:"/profile/"+t.id},R.a.createElement("img",{src:null!=t.photos.small?t.photos.small:ce.a,className:oe.a.userPhoto}))),R.a.createElement("div",null,t.followed?R.a.createElement("button",{disabled:a.some(e=>e===t.id),onClick:()=>{n(t.id)}},"Unfollow"):R.a.createElement("button",{disabled:a.some(e=>e===t.id),onClick:()=>{r(t.id)}},"Follow"))),R.a.createElement("span",null,R.a.createElement("span",null,R.a.createElement("div",null,t.name),R.a.createElement("div",null,t.status)),R.a.createElement("span",null,R.a.createElement("div",null,"user.location.country"),R.a.createElement("div",null,"user.location.city"))))};var ue=e=>{let t=e.currentPage,a=e.onPageChanged,n=e.totalUsersCount,r=e.pageSize,s=e.users,o=Object(ee.a)(e,["currentPage","onPageChanged","totalUsersCount","pageSize","users"]);return R.a.createElement("div",null,R.a.createElement(re,{currentPage:t,onPageChanged:a,pageSize:r,totalUsersCount:n}),R.a.createElement("div",null,s.map(e=>R.a.createElement(ie,{user:e,followingInProgress:o.followingInProgress,unfollow:o.unfollow,follow:o.follow,key:e.id}))))},me=a(32);a(128);var pe=Object(n.d)(Object(X.b)(e=>({users:Z(e),pageSize:q(e),totalUsersCount:K(e),currentPage:Q(e),isFetching:V(e),followingInProgress:$(e)}),{follow:e=>(function(){var t=Object(u.a)(i.a.mark(function t(a){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:v(a,e,p.c.follow.bind(p.c),f);case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}})(),unfollow:e=>(function(){var t=Object(u.a)(i.a.mark(function t(a){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:v(a,e,p.c.unfollow.bind(p.c),E);case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}})(),setCurrentPage:h,toggleFollowingProgress:w,getUsers:(e,t)=>(function(){var a=Object(u.a)(i.a.mark(function a(n){var r;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n(b(!0)),n(h(e)),a.next=4,p.c.getUsers(e,t);case 4:r=a.sent,n(b(!1)),n({type:"SET_USERS",users:r.items}),n({type:"SET_TOTAL_USERS_COUNT",count:r.totalCount-5900});case 8:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}})()}))(class extends R.a.Component{constructor(...e){super(...e),this.onPageChanged=(e=>{const t=this.props.pageSize;this.props.getUsers(e,t)})}componentDidMount(){const e=this.props,t=e.currentPage,a=e.pageSize;this.props.getUsers(t,a)}render(){return R.a.createElement(R.a.Fragment,null,this.props.isFetching?R.a.createElement(me.a,null):null,R.a.createElement(ue,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,followingInProgress:this.props.followingInProgress}))}}),de=a(78),ge=a.n(de),fe=a(126),Ee=a.n(fe);var he=e=>R.a.createElement("header",{className:ge.a.header},R.a.createElement("img",{src:Ee.a}),R.a.createElement("div",{className:ge.a.loginBlock},e.isAuth?R.a.createElement("div",null," ",e.login," ",R.a.createElement("button",{onClick:e.logout},"Log out")):R.a.createElement(D.a,{to:"/login"},"Login")));var be=Object(X.b)(e=>({isAuth:e.auth.isAuth,login:e.auth.login}),{logout:()=>(function(){var e=Object(u.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.logout();case 2:0===e.sent.data.resultCode&&t(P(null,null,null,!1));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}})()})(class extends R.a.Component{render(){return R.a.createElement(he,this.props)}}),we=a(114),ve=a(72),Se=a(27),Oe=a(282),_e=a(45),Pe=a.n(_e);const Ce=Object(we.a)({form:"login"})(({handleSubmit:e,error:t})=>R.a.createElement("div",null,R.a.createElement("form",{onSubmit:e},Object(Se.c)("Email","email",[ve.b],Se.a),Object(Se.c)("Password","password",[ve.b],Se.a,{type:"password"}),Object(Se.c)(null,"rememberMe",[],Se.a,{type:"checkbox"},"remember me"),t&&R.a.createElement("div",{className:Pe.a.formSummaryError},t),R.a.createElement("div",null,R.a.createElement("button",null,"Login")))));var je=Object(X.b)(e=>({isAuth:e.auth.isAuth}),{login:(e,t,a)=>(function(){var n=Object(u.a)(i.a.mark(function n(r){var s,o;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p.a.login(e,t,a);case 2:0===(s=n.sent).data.resultCode?r(C()):(o=s.data.messages.length>0?s.data.messages[0]:"Some error",r(Object(O.a)("login",{_error:"Your Girlfreend booting ErRoR: ".concat(o,"   :)")})));case 4:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}})()})(e=>{return e.isAuth?R.a.createElement(Oe.a,{to:"/profile"}):R.a.createElement("div",null,R.a.createElement("h1",null,"LOGIN"),R.a.createElement(Ce,{onSubmit:t=>{e.login(t.email,t.password,t.rememberMe)}}))});const ye=e=>t=>R.a.createElement(R.a.Suspense,{fallback:R.a.createElement(me.a,null)},R.a.createElement(e,t)),Ne=R.a.lazy(()=>a.e(4).then(a.bind(null,293))),Ie=R.a.lazy(()=>a.e(3).then(a.bind(null,292)));let Te=Object(n.d)(W.a,Object(X.b)(e=>({initialized:e.app.initialized}),{initializeApp:()=>e=>{let t=e(C());Promise.all([t]).then(()=>{e({type:"INITIALIZED_SUCCESS"})})}}))(class extends R.a.Component{componentDidMount(){this.props.initializeApp()}render(){return this.props.initialized?R.a.createElement("div",{className:"app-wrapper"},R.a.createElement(be,null),R.a.createElement(B,null),R.a.createElement("div",{className:"app-wrapper-content"},R.a.createElement(H.a,{path:"/dialogs",render:ye(Ne)}),R.a.createElement(H.a,{path:"/profile/:userId?",render:ye(Ie)}),R.a.createElement(H.a,{path:"/users",render:()=>R.a.createElement(pe,null)}),R.a.createElement(H.a,{path:"/login",render:()=>R.a.createElement(je,null)}))):R.a.createElement(me.a,null)}});var ke=e=>R.a.createElement(J.a,{basename:"/SocialBase"},R.a.createElement(X.a,{store:L},R.a.createElement(Te,null)));z.a.render(R.a.createElement(ke,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})},32:function(e,t,a){"use strict";var n=a(0),r=a.n(n),s=a(125),o=a.n(s);t.a=(e=>r.a.createElement("div",null,r.a.createElement("img",{src:o.a,style:{backgroundColor:"white"}})))},45:function(e,t,a){e.exports={formControl:"formsControl_formControl__1SG7S",error:"formsControl_error__2FSB6",formSummaryError:"formsControl_formSummaryError__1bOH6"}},58:function(e,t,a){e.exports={paginator:"Paginator2_paginator__1gmqw",pageNumber:"Paginator2_pageNumber__2j7_y",selectedPage:"Paginator2_selectedPage__1DTmK"}},72:function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"a",function(){return r});const n=e=>{if(!e)return"Field is required"},r=e=>t=>{if(t&&t.length>e)return"Max lenngth is ".concat(e," symbols")}},78:function(e,t,a){e.exports={header:"Header_header__2lQ4y",loginBlock:"Header_loginBlock__2EJe2"}},81:function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"d",function(){return m}),a.d(t,"c",function(){return p}),a.d(t,"e",function(){return d});var n=a(7),r=a.n(n),s=a(14),o=a(8),l=a(10);let c={posts:[{id:1,message:"This app is lovly ))",likesCount:1201247},{id:2,message:"Good thems!",likesCount:9782},{id:3,message:"I want dance to night!",likesCount:15405},{id:4,message:"This is crazy dance?",likesCount:971340}],profile:null,status:""};const i=e=>({type:"ADD-POST",newPostText:e}),u=e=>({type:"SET_STATUS",status:e}),m=e=>(function(){var t=Object(s.a)(r.a.mark(function t(a){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.c.getProfile(e);case 2:n=t.sent,a({type:"SET_USER_PROFILE",profile:n.data});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}})(),p=e=>(function(){var t=Object(s.a)(r.a.mark(function t(a){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.b.getStatus(e);case 2:n=t.sent,a(u(n.data));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}})(),d=e=>(function(){var t=Object(s.a)(r.a.mark(function t(a){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.b.updateStatus(e);case 2:0===t.sent.data.resultCode&&a(u(e));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}})();t.b=((e=c,t)=>{switch(t.type){case"ADD-POST":{let a={id:5,message:t.newPostText,likesCount:0};return Object(o.a)({},e,{posts:[...e.posts,a],newPostText:""})}case"SET_STATUS":return Object(o.a)({},e,{status:t.status});case"SET_USER_PROFILE":return Object(o.a)({},e,{profile:t.profile});case"DELETE_POST":return Object(o.a)({},e,{posts:e.posts.filter(e=>e.id!=t.postId)});default:return e}})},90:function(e,t,a){"use strict";a.d(t,"b",function(){return s});var n=a(8);let r={dialogs:[{id:1,name:"Piter"},{id:2,name:"Nasty"},{id:3,name:"Nick"},{id:4,name:"Sasha"},{id:5,name:"Marina"},{id:6,name:"Nika"}],messages:[{id:1,message:"Hi"},{id:2,message:"How is your girl?"},{id:3,message:"Hello"},{id:4,message:"Nice!"},{id:5,message:"Yo"}]};const s=e=>({type:"SEND_MESSAGE",newMessageBody:e});t.a=((e=r,t)=>{switch(t.type){case"SEND_MESSAGE":let a=t.newMessageBody;return Object(n.a)({},e,{messages:[...e.messages,{id:6,message:a}]});default:return e}})}},[[154,1,2]]]);
//# sourceMappingURL=main.dfb758e5.chunk.js.map